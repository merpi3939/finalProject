<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="site.bluemoon.mapper.AdminWaterparkMapper">

	<!-- ■Waterpark's News Mapper -->
	<insert id="insertNews" parameterType="OceanNews">
		<selectKey resultType="int" keyProperty="newsNo" order="BEFORE">
			select news_no_seq.nextval from dual
		</selectKey>
		
		insert into
			ocean_news
		values
			(
				#{newsNo},
				sysdate,
				#{newsCont},
				#{newsUno}
			)
	</insert>
	
	<update id="updateNews" >
		update
			ocean_news
		set
			news_cont=#{newsCont}
		where
			news_no=#{newsNo}
	</update>
	
	<delete id="deleteNews">
		delete from
			ocean_news
		where
			news_no=#{newsNo}
	</delete>
	
	<select id="selectNews" resultType="OceanNews">
		select 
			* 
		from 
			ocean_news 
		where 
			news_no=#{newsNo}
	</select>
	
	<select id="selectNewsList" resultType="OceanNews">
		select 
			* 
		from 
			ocean_news  
		order by 
			news_no desc
	</select>
	
	<!--  체크박스 선택되 사람만 삭제-->
	<delete id="deleteCheckNews" parameterType="list">
		delete from
			ocean_news
	
		<if test="list != null">
			where newsNo in
		
			<foreach item="newsNo" collection="list" open="(" close=")" separator=",">
				#{newsNo}
			</foreach>
		</if>
	</delete>
	
	<!-- ■Waterpark's Reservation Mapper -->
	<resultMap id="userOceanResultMap" type="AdminUserReservation">
		<association property="user" javaType="User">
			<id property="userNo" column="user_no" />
			<result property="userId" column="user_id" />
				<!-- 	
			<result property="userpassword" column="user_password" />		
			<result property="username" column="user_name" />		
			<result property=	"userbirthday" column="user_birthday" />		
			<result property="userphone" column="user_phone" />		
			<result property="useremail" column="user_email" />		
			<result property="usersex" column="user_email" />		
			<result property="userzipcode" column="user_zipcode" />		
			<result property="useraddress1" column="user_address1" />		
			<result property="useraddress2" column="user_address2" />		
			<result property="userpoint" column="user_point" />		
			<result property="userjoindate" column="user_joindate" />		
			<result property="userlogindate" column="user_logindate" />		
			<result property="userwithdrowdate" column="user_withdrowdate" />		
			<result property="userstate" column="user_state" />	
				 -->
		</association>
		
		<association property="ocean" javaType="OceanReservationDTO">
			<id property="rsNo" column="rs_no" />
			<result property="rsUno" column="rs_uno" />		
			<result property="rsName" column="rs_name" />		
			<result property="rsPhone" column="rs_phone" />		
			<result property="rsDate" column="rs_date" />		
			<result property="rsUsedate" column="rs_usedate" />		
			<result property="rsTicket" column="rs_ticket" />		
			<result property="rsAdult" column="rs_adult" />		
			<result property="rsChild" column="rs_child" />		
			<result property="rsState" column="rs_state" />		
			<result property="rsPrice" column="rs_price" />		
			<result property="rsOption" column="rs_option" />		
		</association>
	</resultMap>
	
	<select id="selectReservationList" resultType="OceanReservationDTO">
		select
			*
		from 
			ocean_reservation 
		
	</select>
</mapper>